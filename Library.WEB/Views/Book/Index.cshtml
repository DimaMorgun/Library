@model IEnumerable<Library.ViewModelLayer.ViewModels.BookViewModel>

<div id="example">
    <div id="grid"></div>
    <script>
        $(document).ready(function () {
            var dataSource = new kendo.data.DataSource({
                transport: {
                    read: function (e) {
                        $.ajax({
                            type: 'GET',
                            url: "Book/GetAll",
                            dataType: "json",
                            success: function (data) {
                                return e.success(data);
                            }
                        });
                    },

                    destroy: function (e) {
                        $.ajax({
                            type: 'POST',
                            url: '/Book/Delete/' + e.data.BookId,
                            dataType: 'number',
                            success: function (data) {
                                $('#grid').data('kendoGrid').dataSource.read();
                                $('#grid').data('kendoGrid').refresh();
                                e.success(data);
                            },
                            error: function (data) {
                                $('#grid').data('kendoGrid').dataSource.read();
                                $('#grid').data('kendoGrid').refresh();
                                e.error("", "404", data);
                            }
                        });
                    },
                },

                schema:
                {
                    model:
                    {
                        id: "BookId",
                        fields: {
                            BookId: { editable: false, nullable: true, type: "number" },
                            Name: { editable: true, nullable: true, type: "string" },
                            AuthorName: { editable: true, nullable: true, type: "string" },
                            YearOfPublishing: { editable: false, nullable: true, type: "number" },
                        }
                    }
                },
                batch: false,
                pageSize: 5

            });
            $("#grid").kendoGrid({
                dataSource: dataSource,
                groupable: true,
                sortable: true,
                editable: {
                    mode: "inline",
                    confirmation: false
                },
                toolbar: [{
                    template:
                    '<a href="Book/CreateView">Create New</a>',
                }],
                columns: [
                    {
                        field: "Name",
                        title: "Name",
                        sortable: true
                    },
                    {
                        field: "YearOfPublishing",
                        title: "Year",
                        sortable: true
                    },
                    {
                        field: "BookId",
                        title: "&nbsp",
                        sortable: false,
                        width: 105,
                        template:
                        '<a class="k-button k-button-icontext" href="Book/GetByIdView/#= BookId #" >Get</a>'
                    },
                    {
                        field: "BookId",
                        title: "&nbsp",
                        sortable: false,
                        width: 129,
                        template:
                        '<a class="k-button k-button-icontext" href="Book/UpdateView/#= BookId #" >Update</a>'
                    },
                    {
                        title: "&nbsp",
                        width: 140,
                        command: ['destroy']
                    }
                ],
                height: "500px",
                pageable: {
                    refresh: true,
                    pageSizes: true,
                    buttonCount: 5
                },
            }).data("kendoGrid");
        });
    </script>
</div>